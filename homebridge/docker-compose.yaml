services:
  homebridge:
    image: homebridge/homebridge
    labels:
      caddy: ${WEBSITE_FQDN}
      caddy.reverse_proxy: host.docker.internal:8581
      caddy.tls.dns: cloudflare ${SERVER_CLOUDFLARE_API_TOKEN}
      caddy.tls.resolvers: 1.1.1.1
    network_mode: host
    restart: unless-stopped
    volumes:
      - homebridge_data:/homebridge
volumes:
  homebridge_data:
